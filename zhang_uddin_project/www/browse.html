<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">

	<meta http-equiv="Content-Security-Policy" content="default-src *; style-src 'self' http://* 'unsafe-inline'; script-src 'self' http://* 'unsafe-inline' 'unsafe-eval'" />

	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta name="format-detection" content="telephone=no">
	<meta name="msapplication-tap-highlight" content="no">
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
	<link rel="stylesheet" type="text/css" href="css/index.css">

	<!-- Bootstrap -->
	<!--
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	-->
	<link rel="stylesheet" type="text/css" href="bootstrap-4.1.3-dist/css/bootstrap.min.css" />
	<script src="bootstrap-4.1.3-dist/js/bootstrap.min.js"></script>

	<link rel="stylesheet" href="css/style.css">

	<script type="text/javascript" src="jquery.js"></script>

	<script type="text/javascript">
		//function to get the image for a clan
		function getClanImageDirectory(clanName) {
			//remove spaces
			var clanNameStripped = clanName.split(' ').join('');
			var clanImageDir = "vanguardImages/clan/Icon_" + clanNameStripped + ".png";
			return clanImageDir;
		}

		//print each deck's info
		$(document).ready(function () {
			/*testing session variable
			var username = sessionStorage.getItem('username');
			alert(username);*/
			var platform;

			if (navigator.platform.match(/Win32|MacIntel/)) {
				platform = "http://127.0.0.1/";
			}
			else {
				platform = "http://10.0.2.2/";
			}

			var url = platform + "zhang_kevin_project2/getAllDecks.php";
			$.getJSON(url, function (result) {
				console.log(result);
				$.each(result, function (i, field) {
					var deck_id = field.deck_id;
					var deckname = field.deckname;
					var description = field.description;
					// change description if empty
					if (description === "") {
						description = "N/A";
					}
					var clan = field.clan;
					var clanImageDir = getClanImageDirectory(clan);
					$(".row").append(
						"<div class='deckinfo'>" +
						"<img src='" + clanImageDir + "' class='rounded' alt='" + clan + "' style='width:100%'" +
						"<p>" +
						"<strong>Deck Name: </strong>" + deckname + "<br>" +
						"<strong>Description: </strong>" + description + "<br>" +
						"<strong>Clan: </strong>" + clan + "<br>" +
						//"<strong>Rating: </strong>" + rating + "<br>" +
						"</p>" +
						"</div>");
				});
			});
		});
	</script>

	<title>Browse Decks</title>
</head>

<body>
	<header class="site-header">
		<div class="container">
			<h1>Vanguard Deck Builder</h1>
		</div>
	</header>

	<nav class="site-nav">
		<div class="container">
			<ul>
				<li><a href="browse.html">Browse Decks</a></li>
				<li><a href="build.html">Build Decks</a></li>
			</ul>
		</div>
	</nav>
	
	<section class="site-main">
		<div class="container">
			<h3 class="text-center">All Decks</h3>

			<div class="row">
				<!-- <div id="decks"></div> -->
			</div>
		</div>
	</section>

	<footer class="site-footer">

		
	</footer>

</body>

</html>